# ============================================================
# 测试依赖源文件
# 使用 pip-compile 生成锁定的 requirements-test.txt
# 命令: pip-compile requirements-test.in -o requirements-test.txt
# ============================================================

# 引用核心依赖
-r requirements.in

# ============================================================
# 测试框架
# ============================================================
pytest>=7.0.0           # 测试框架
pytest-asyncio>=0.23.0  # 异步测试支持
pytest-cov>=4.0.0       # 测试覆盖率收集
pytest-timeout>=2.4.0   # 测试超时控制

# ============================================================
# Coverage 版本约束 (coverage 7.11+ 需要 Python >= 3.10)
# ============================================================
coverage>=7.0.0,<7.11 ; python_version < "3.10"
coverage>=7.0.0 ; python_version >= "3.10"

# ============================================================
# Mock 工具
# ============================================================
respx>=0.20.0           # HTTP mock 测试（配合 httpx）

# ============================================================
# CI 导入检查额外依赖（可选模块）
# ============================================================
beautifulsoup4>=4.12.0  # knowledge 模块导入依赖
html2text>=2024.2.26    # knowledge 模块导入依赖
tiktoken>=0.5.0         # indexing 模块导入依赖

# ============================================================
# 注意: ML 测试依赖已移至 requirements-test-ml.in
# 运行 ML 相关测试请使用:
#   pip install -r requirements-test-ml.in
# 或:
#   pip install -e ".[test,ml]"
# ============================================================
